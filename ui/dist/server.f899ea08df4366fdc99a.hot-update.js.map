{"version":3,"sources":["webpack:///./server/uiserver.js"],"names":["dotenv","config","app","express","SourceMapSupport","install","enableHMR","process","env","ENABLE_HMR","console","log","webpack","require","devMiddleware","hotMiddleware","entry","push","plugins","HotModuleReplacementPlugin","compiler","use","static","apiProxyTarget","API_PROXY_TARGET","proxy","target","UI_API_ENDPOINT","UI_SERVER_API_ENDPOINT","get","req","res","REACT_APP_AUTH0_DOMAIN","REACT_APP_AUTH0_CLIENT_ID","REACT_APP_AUTH0_CALLBACK_URL","send","JSON","stringify","next","render","port","UI_SERVER_PORT","listen","module","hot","accept"],"mappings":"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","file":"server.f899ea08df4366fdc99a.hot-update.js","sourcesContent":["import dotenv from 'dotenv';\r\nimport express from 'express';\r\nimport proxy from 'http-proxy-middleware';\r\nimport SourceMapSupport from 'source-map-support';\r\n// eslint-disable-next-line import/extensions\r\nimport render from './render.jsx';\r\n\r\ndotenv.config();\r\n\r\n\r\n\r\nconst app = express();\r\n\r\nSourceMapSupport.install();\r\n\r\nconst enableHMR = (process.env.ENABLE_HMR || 'true') === 'true';\r\n\r\nif (enableHMR && (process.env.NODE_ENV !== 'production')) {\r\n  console.log('Adding dev middleware, enabling HMR');\r\n  /* eslint \"global-require\": \"off\" */\r\n  /* eslint \"import/no-extraneous-dependencies\": \"off\" */\r\n  const webpack = require('webpack');\r\n  const devMiddleware = require('webpack-dev-middleware');\r\n  const hotMiddleware = require('webpack-hot-middleware');\r\n\r\n  const config = require('../webpack.config.js')[0];\r\n  config.entry.app.push('webpack-hot-middleware/client');\r\n  config.plugins = config.plugins || [];\r\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\r\n\r\n  const compiler = webpack(config);\r\n  app.use(devMiddleware(compiler));\r\n  app.use(hotMiddleware(compiler));\r\n}\r\n\r\napp.use(express.static('public'));\r\n\r\nconst apiProxyTarget = process.env.API_PROXY_TARGET;\r\nif (apiProxyTarget) {\r\n  app.use('/graphql', proxy({ target: apiProxyTarget }));\r\n}\r\n\r\nif (!process.env.UI_API_ENDPOINT) {\r\n  process.env.UI_API_ENDPOINT = 'http://localhost:3000/graphql';\r\n}\r\n\r\nif (!process.env.UI_SERVER_API_ENDPOINT) {\r\n  process.env.UI_SERVER_API_ENDPOINT = process.env.UI_API_ENDPOINT;\r\n}\r\n\r\napp.get('/env.js', (req, res) => {\r\n  const env = {\r\n    UI_API_ENDPOINT: process.env.UI_API_ENDPOINT,\r\n    REACT_APP_AUTH0_DOMAIN: process.env.REACT_APP_AUTH0_DOMAIN,\r\n    REACT_APP_AUTH0_CLIENT_ID: process.env.REACT_APP_AUTH0_CLIENT_ID,\r\n    REACT_APP_AUTH0_CALLBACK_URL: process.env.REACT_APP_AUTH0_CALLBACK_URL,\r\n  };\r\n  res.send(`window.ENV = ${JSON.stringify(env)}`);\r\n});\r\n\r\napp.get('*', (req, res, next) => {\r\n  render(req, res, next);\r\n});\r\n\r\nconst port = process.env.UI_SERVER_PORT || 8000;\r\n\r\napp.listen(port, () => {\r\n  console.log(`UI started on port ${port}`);\r\n});\r\n\r\nif (module.hot) {\r\n  module.hot.accept('./render.jsx');\r\n}\r\n"],"sourceRoot":""}