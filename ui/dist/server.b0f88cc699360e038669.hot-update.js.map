{"version":3,"sources":["webpack:///./src/IssueReport.jsx"],"names":["statuses","data","IssueReport","React","Component","fetchData","match","search","showError","params","URLSearchParams","vars","get","status","effortMin","parseInt","Number","isNaN","effortMax","id","idInt","hasSelection","selectedId","query","graphQLFetch","constructor","props","stats","store","initialData","issueCounts","state","componentDidMount","loadData","componentDidUpdate","prevProps","location","prevSearch","setState","render","headerColumns","map","statRows","counts","owner","cData","VictoryTheme","material","x","IssueReportWithToast","withToasts"],"mappings":"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","file":"server.b0f88cc699360e038669.hot-update.js","sourcesContent":["/* eslint-disable linebreak-style */\r\n\r\nimport React from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Table from 'react-bootstrap/Table';\r\nimport URLSearchParams from 'url-search-params';\r\n// Adding Victory Charting\r\nimport {\r\n  VictoryBar, VictoryChart, VictoryAxis,\r\n  VictoryTheme,\r\n} from 'victory';\r\n\r\nimport withToasts from './withToasts.jsx';\r\nimport graphQLFetch from './graphQLFetch.js';\r\nimport store from './store.js';\r\nimport IssueFilter from './IssueFilter.jsx';\r\n\r\nconst statuses = ['New', 'Assigned', 'Fixed', 'Closed'];\r\nconst data = [];\r\n\r\nclass IssueReport extends React.Component {\r\n  static async fetchData(match, search, showError) {\r\n    const params = new URLSearchParams(search);\r\n    const vars = { };\r\n    if (params.get('status')) vars.status = params.get('status');\r\n\r\n    const effortMin = parseInt(params.get('effortMin'), 10);\r\n    if (!Number.isNaN(effortMin)) vars.effortMin = effortMin;\r\n    const effortMax = parseInt(params.get('effortMax'), 10);\r\n    if (!Number.isNaN(effortMax)) vars.effortMax = effortMax;\r\n\r\n    const { params: { id } } = match;\r\n    const idInt = parseInt(id, 10);\r\n    if (!Number.isNaN(idInt)) {\r\n      vars.hasSelection = true;\r\n      vars.selectedId = idInt;\r\n    }\r\n\r\n    const query = `query issueList(\r\n      $status: StatusType\r\n      $effortMin: Int\r\n      $effortMax: Int\r\n    ) {\r\n      issueCounts(\r\n        status: $status\r\n        effortMin: $effortMin\r\n        effortMax: $effortMax\r\n      ) {\r\n        owner New Assigned Fixed Closed\r\n      }\r\n    }`;\r\n\r\n    const data = await graphQLFetch(query, vars, showError);\r\n    return data;\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const stats = store.initialData ? store.initialData.issueCounts : null;\r\n    delete store.initialData;\r\n    this.state = { stats };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { stats } = this.state;\r\n    if (stats == null) this.loadData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { location: { search: prevSearch } } = prevProps;\r\n    const { location: { search } } = this.props;\r\n    if (prevSearch !== search) {\r\n      this.loadData();\r\n    }\r\n  }\r\n\r\n  async loadData() {\r\n    const { location: { search }, match, showError } = this.props;\r\n    const data = await IssueReport.fetchData(match, search, showError);\r\n    if (data) {\r\n      this.setState({ stats: data.issueCounts });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const headerColumns = (\r\n      statuses.map((status) => (\r\n        <th key={status}>{status}</th>\r\n      ))\r\n    );\r\n    const { stats } = this.state;\r\n    if (stats == null) return null;\r\n    const statRows = stats.map((counts) => (\r\n      <tr key={counts.owner}>\r\n        <td>{counts.owner}</td>\r\n        {statuses.map((status) => (\r\n          <td key={status}>{counts[status]}</td>\r\n        ))}\r\n      </tr>\r\n    ));\r\n    const cData = stats.map((counts) => (\r\n      data = [\"owner\"]\r\n    ))\r\n    return (\r\n      <>\r\n        <Card className=\"text-left bg-dark text-white\">\r\n          <Card.Header><h5>Filter</h5></Card.Header>\r\n          <Card.Body>\r\n            <IssueFilter urlBase=\"/report\" />\r\n          </Card.Body>\r\n        </Card>\r\n        <div className=\"spacer\" />\r\n        <Table striped bordered hover responsive variant=\"dark\">\r\n          <thead>\r\n            <tr>\r\n              <th>Owner</th>\r\n              {headerColumns}\r\n            </tr>\r\n          </thead>\r\n          <tbody>{statRows}</tbody>\r\n        </Table>\r\n        <div className=\"spacer\" />\r\n        <Card>\r\n          <Card.Header><h5>Chart</h5></Card.Header>\r\n          <Card.Body>\r\n            <VictoryChart\r\n              // adding the material theme provided with Victory\r\n              theme={VictoryTheme.material}\r\n              domainPadding={20}\r\n            >\r\n              <VictoryAxis\r\n                tickValues={[1, 2, 3, 4]}\r\n                tickFormat={['Quarter 1', 'Quarter 2', 'Quarter 3', 'Quarter 4']}\r\n              />\r\n              <VictoryAxis\r\n                dependentAxis\r\n                tickFormat={(x) => (`$${x / 1000}k`)}\r\n              />\r\n              <VictoryBar\r\n                data={stats.issueCounts}\r\n                x=\"status\"\r\n                y=\"count\"\r\n              />\r\n            </VictoryChart>\r\n          </Card.Body>\r\n        </Card>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst IssueReportWithToast = withToasts(IssueReport);\r\nIssueReportWithToast.fetchData = IssueReport.fetchData;\r\nexport default IssueReportWithToast;\r\n"],"sourceRoot":""}