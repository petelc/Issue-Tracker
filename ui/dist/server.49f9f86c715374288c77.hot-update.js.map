{"version":3,"sources":["webpack:///./src/IssueReport.jsx","webpack:///external \"victory\""],"names":["statuses","myData","IssueReport","React","Component","fetchData","match","search","showError","params","URLSearchParams","vars","get","status","effortMin","parseInt","Number","isNaN","effortMax","id","idInt","hasSelection","selectedId","query","data","graphQLFetch","constructor","props","stats","store","initialData","issueCounts","state","componentDidMount","loadData","componentDidUpdate","prevProps","location","prevSearch","setState","render","headerColumns","map","statRows","counts","owner","cData","push","x","owners","y","labels","fill","fontSize","fontWeight","IssueReportWithToast","withToasts"],"mappings":"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","file":"server.49f9f86c715374288c77.hot-update.js","sourcesContent":["/* eslint-disable linebreak-style */\r\n\r\nimport React from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Table from 'react-bootstrap/Table';\r\nimport URLSearchParams from 'url-search-params';\r\n// Adding Victory Charting\r\nimport {\r\n  VictoryPie,\r\n} from 'victory';\r\n\r\nimport withToasts from './withToasts.jsx';\r\nimport graphQLFetch from './graphQLFetch.js';\r\nimport store from './store.js';\r\nimport IssueFilter from './IssueFilter.jsx';\r\n\r\nconst statuses = ['New', 'Assigned', 'Fixed', 'Closed'];\r\nconst myData = [];\r\n\r\nclass IssueReport extends React.Component {\r\n  static async fetchData(match, search, showError) {\r\n    const params = new URLSearchParams(search);\r\n    const vars = { };\r\n    if (params.get('status')) vars.status = params.get('status');\r\n\r\n    const effortMin = parseInt(params.get('effortMin'), 10);\r\n    if (!Number.isNaN(effortMin)) vars.effortMin = effortMin;\r\n    const effortMax = parseInt(params.get('effortMax'), 10);\r\n    if (!Number.isNaN(effortMax)) vars.effortMax = effortMax;\r\n\r\n    const { params: { id } } = match;\r\n    const idInt = parseInt(id, 10);\r\n    if (!Number.isNaN(idInt)) {\r\n      vars.hasSelection = true;\r\n      vars.selectedId = idInt;\r\n    }\r\n\r\n    const query = `query issueList(\r\n      $status: StatusType\r\n      $effortMin: Int\r\n      $effortMax: Int\r\n    ) {\r\n      issueCounts(\r\n        status: $status\r\n        effortMin: $effortMin\r\n        effortMax: $effortMax\r\n      ) {\r\n        owner New Assigned Fixed Closed\r\n      }\r\n    }`;\r\n\r\n    const data = await graphQLFetch(query, vars, showError);\r\n    return data;\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const stats = store.initialData ? store.initialData.issueCounts : null;\r\n    delete store.initialData;\r\n    this.state = { stats };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { stats } = this.state;\r\n    if (stats == null) this.loadData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { location: { search: prevSearch } } = prevProps;\r\n    const { location: { search } } = this.props;\r\n    if (prevSearch !== search) {\r\n      this.loadData();\r\n    }\r\n  }\r\n\r\n  async loadData() {\r\n    const { location: { search }, match, showError } = this.props;\r\n    const data = await IssueReport.fetchData(match, search, showError);\r\n    if (data) {\r\n      this.setState({ stats: data.issueCounts });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const headerColumns = (\r\n      statuses.map((status) => (\r\n        <th key={status}>{status}</th>\r\n      ))\r\n    );\r\n    const { stats } = this.state;\r\n    if (stats == null) return null;\r\n    const statRows = stats.map((counts) => (\r\n      <tr key={counts.owner}>\r\n        <td>{counts.owner}</td>\r\n        {statuses.map((status) => (\r\n          <td key={status}>{counts[status]}</td>\r\n        ))}\r\n      </tr>\r\n    ));\r\n    const cData = stats.map((counts) => (\r\n      myData.push({\r\n        x: counts.owners,\r\n        y: counts.counts,\r\n      })));\r\n    return (\r\n      <>\r\n        <Card className=\"text-left bg-dark text-white\">\r\n          <Card.Header><h5>Filter</h5></Card.Header>\r\n          <Card.Body>\r\n            <IssueFilter urlBase=\"/report\" />\r\n          </Card.Body>\r\n        </Card>\r\n        <div className=\"spacer\" />\r\n        <Table striped bordered hover responsive variant=\"dark\">\r\n          <thead>\r\n            <tr>\r\n              <th>Owner</th>\r\n              {headerColumns}\r\n            </tr>\r\n          </thead>\r\n          <tbody>{statRows}</tbody>\r\n        </Table>\r\n        <div className=\"spacer\" />\r\n        <Card>\r\n          <Card.Header><h5>Chart</h5></Card.Header>\r\n          <Card.Body>\r\n            <VictoryPie\r\n              colorScale={['tomato', 'orange', 'gold', 'cyan', 'navy']}\r\n              data={cData}\r\n              label={ { owners } }\r\n              style={{ labels: { fill: 'gray', fontSize: 20, fontWeight: 'bold' } }}\r\n            />\r\n          </Card.Body>\r\n        </Card>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst IssueReportWithToast = withToasts(IssueReport);\r\nIssueReportWithToast.fetchData = IssueReport.fetchData;\r\nexport default IssueReportWithToast;\r\n","module.exports = require(\"victory\");"],"sourceRoot":""}