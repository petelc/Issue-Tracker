{"version":3,"sources":["webpack:///./server/render.jsx"],"names":["render","req","res","activeRoute","routes","find","route","matchPath","path","initialData","component","fetchData","match","store","element","url","body","ReactDOMServer","renderToString","send","template"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,eAAeA,MAAf,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC;AAC9B,QAAMC,WAAW,GAAGC,sDAAM,CAACC,IAAP,CACjBC,KAAD,IAAWC,kEAAS,CAACN,GAAG,CAACO,IAAL,EAAWF,KAAX,CADF,CAApB;AAIA,MAAIG,WAAJ;;AACA,MAAIN,WAAW,IAAIA,WAAW,CAACO,SAAZ,CAAsBC,SAAzC,EAAoD;AAClD,UAAMC,KAAK,GAAGL,kEAAS,CAACN,GAAG,CAACO,IAAL,EAAWL,WAAX,CAAvB;AACAM,eAAW,GAAG,MAAMN,WAAW,CAACO,SAAZ,CAAsBC,SAAtB,CAAgCC,KAAhC,CAApB;AACD;;AAEDC,uDAAK,CAACJ,WAAN,GAAoBA,WAApB;AACA,QAAMK,OAAO,gBACX,2DAAC,6DAAD;AAAc,YAAQ,EAAEb,GAAG,CAACc,GAA5B;AAAiC,WAAO,EAAE;AAA1C,kBACE,2DAAC,qDAAD,OADF,CADF;AAKA,QAAMC,IAAI,GAAGC,uDAAc,CAACC,cAAf,CAA8BJ,OAA9B,CAAb;AACAZ,KAAG,CAACiB,IAAJ,CAASC,4DAAQ,CAACJ,IAAD,EAAOP,WAAP,CAAjB;AACD;;AAEcT,qEAAf,E","file":"server.c04109e2f104a887adda.hot-update.js","sourcesContent":["/* eslint-disable import/extensions */\r\nimport React from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport { StaticRouter, matchPath } from 'react-router-dom';\r\n\r\nimport Page from '../src/Page.jsx';\r\nimport template from './template.js';\r\nimport store from '../src/store.js';\r\nimport routes from '../src/routes.js';\r\n\r\nasync function render(req, res) {\r\n  const activeRoute = routes.find(\r\n    (route) => matchPath(req.path, route),\r\n  );\r\n\r\n  let initialData;\r\n  if (activeRoute && activeRoute.component.fetchData) {\r\n    const match = matchPath(req.path, activeRoute);\r\n    initialData = await activeRoute.component.fetchData(match);\r\n  }\r\n\r\n  store.initialData = initialData;\r\n  const element = (\r\n    <StaticRouter location={req.url} context={{}}>\r\n      <Page />\r\n    </StaticRouter>\r\n  );\r\n  const body = ReactDOMServer.renderToString(element);\r\n  res.send(template(body, initialData));\r\n}\r\n\r\nexport default render;\r\n"],"sourceRoot":""}